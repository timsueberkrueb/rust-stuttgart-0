<!DOCTYPE html>
<html>
<head>
    <title>My Awesome Presentation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="/_lib/css/style.css" />
</head>
<body>
<textarea id="source">

class: center, middle, title-slide, rust-logo-black

# Rust Ownership

???

Notes for the _first_ slide!

---

# Agenda

0. Wieso Ownership?
0. Was ist Ownership?
0. Für was nicht?
0. Beispiele

---

# Wieso Ownership?

0. Ownership ermöglicht es Rust ohne Garbage Collection Memorysafe zu sein.
0. Kann aber auch für gewissen Anwendungslogik benutzt werden.

---

# Was ist Ownership?

0. Ownership ist ein Konzept bei dem Resourcen jeweils genau einen Besitzer haben.
0. Wenn der Besitzer freigegeben wird werden auch alle dessen Ressourcen freigegeben.

---

# Beispiel / 1
```rs
	let s = String::from("Hello World");
	// s ist der Besitzer des Strings 'Hello World'		

```
---

# Beispiel / 2
```rs
	{
		let s = String::from("Hello World");
	}
	// Der String wird freigegeben weil s am ende des Scopes freigegeben wird
```
---

# Beispiel / 3
```rs
	let s = String::from("Hello World");
	let s2 = s;
	// s ist nicht mehr gültig, da der Besitz des Strings von s auf s2 verschoben wurde.
```
---

# Beispiel / 4
```rs
	let s = String::from("Hello World");
	let s2 = s.clone();
	// s und s2 sind gültig, da clone() eine Kopie des gesamtent Strings macht.
	// clone() macht es deutlich das eine teure Kopie gemacht wurde
```

---

# Für was nicht?

Für einige grundlegende Datentype die sehr leicht kopiert werden können (Copy Trait).

- Integer
- Floats
- Bool
- Char
- Tuple die aus Typen bestehen die Copy implementiren
- Structs, die aus Typen bestehen die Copy implementiren und die als Copy gekennzeichnet sind.

---

# Beispiel für den Copy Trait
```rs
	let a = 5;
	let b = a;
	// Sowohl a als auch b sind gültig da a kopiert anstatt verschoben wird.
```
---

# Borrowing 
Anstatt den Besitz zu verschieben kann man auch Referenzen auf Werte erstellen.
Dabei gilt es kann zu jedem Zeitpunkt entweder
- Genau eine mutable Referenze


oder
- eine oder mehrere immutable Referenze
geben.

Ziel einer Referenz muss mindestens so lang existiren wie die Referenz.

---

# Borrowing Beispiel / 1
```rs 
	let s = String::from("Hello World");
	let s_ref1 = &s;
	let s_ref2 = &s;
	println!("s: {}, s_ref1: {}, s_ref2: {}", s, s_ref1, s_ref2);
	// gibt alle aus
```
[Playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=40c4f3fe0dc438b717742930c130192c)
---

# Ownership als Teil der Anwendungslogik

Ein einfaches Gutscheinsystem, in dem Sichergestllt wird das ein Gutschein nur genau einmal ausgegeben werden kann.




</textarea>
<script src="../_lib/js/remark.js" type="text/javascript">
</script>
<script type="text/javascript">
    let slideshow = remark.create({ratio: "16:9"});
</script>
</body>
</html>
